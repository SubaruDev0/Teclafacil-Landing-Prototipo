{% load i18n %}

<section class="testimonials-section" aria-labelledby="testimonials-title">
  <div class="container">
    <h2 id="testimonials-title" class="section-title text-center">Lo que dicen nuestros usuarios</h2>
    <p class="section-sub">Testimonios reales de quienes ya probaron TeclaFácil.</p>

    <div class="testimonial-grid">
      {% for fb in published_feedbacks %}
      <article class="testimonial-card">
        <div class="avatar" aria-hidden="true">{{ fb.nombre|slice:":2"|upper }}</div>
        <div class="testimonial-body">
          <blockquote>"{{ fb.comentario|default:"Excelente producto, muy recomendado."|truncatewords:30 }}"</blockquote>
          <div class="meta">
            <span class="author">{{ fb.nombre }}</span>
            <span class="role"> — Calificación: {{ fb.rating }}/5 ⭐</span>
          </div>
        </div>
      </article>
      {% empty %}
      <div style="text-align:center;padding:3rem;color:var(--muted);">
        <p style="font-size:1.3rem;">Aún no hay testimonios publicados. ¡Sé el primero en compartir tu experiencia!</p>
      </div>
      {% endfor %}
    </div>

    <div class="feedback-section">
      <h3>¿Ya probaste TeclaFácil? Cuéntanos qué te pareció</h3>
      <p style="color:var(--muted);font-size:1.1rem;margin-bottom:2rem;">Tu opinión nos ayuda a mejorar y aparecer si tu calificación es 4 o 5 estrellas.</p>
      <form action="{% url 'landing:feedback' %}" method="post" class="mt-3">
        {% csrf_token %}
        <div class="row">
          <div class="col-6 mb-3">
            <label for="fb-nombre" class="form-label">Nombre completo (requerido)</label>
            <input id="fb-nombre" name="nombre" class="form-control" placeholder="Tu nombre completo" required>
          </div>
          <div class="col-6 mb-3">
            <label for="fb-email" class="form-label">Email (opcional)</label>
            <input id="fb-email" name="email" type="email" class="form-control" placeholder="tu@ejemplo.com">
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label">¿Cómo calificarías tu experiencia? (1-5 estrellas)</label>
          <div style="display:flex;gap:1.5rem;align-items:center;margin-top:0.8rem;">
            <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;font-size:1.2rem;">
              <input type="radio" name="rating" value="1" style="width:20px;height:20px;"> 1 ⭐
            </label>
            <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;font-size:1.2rem;">
              <input type="radio" name="rating" value="2" style="width:20px;height:20px;"> 2 ⭐
            </label>
            <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;font-size:1.2rem;">
              <input type="radio" name="rating" value="3" checked style="width:20px;height:20px;"> 3 ⭐
            </label>
            <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;font-size:1.2rem;">
              <input type="radio" name="rating" value="4" style="width:20px;height:20px;"> 4 ⭐
            </label>
            <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;font-size:1.2rem;">
              <input type="radio" name="rating" value="5" style="width:20px;height:20px;"> 5 ⭐
            </label>
          </div>
        </div>
        <div class="mb-3">
          <label for="fb-comentario" class="form-label">Comentarios (opcional)</label>
          <textarea id="fb-comentario" name="comentario" class="form-control" rows="4" placeholder="Cuéntanos qué te gustó o qué mejorarías..."></textarea>
        </div>
        <button class="btn btn-primary btn-lg" type="submit">Enviar mi opinión</button>
      </form>
    </div>

  </div>
</section>
